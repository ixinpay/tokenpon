<div class="container">
    <div class="row">
        <div class="form-group col-md-9 no-gutters">
            <label for="businessCategory" translate>{{model.businessMainCategory}}</label> >
            <label for="businessCategory" class="inline" translate>{{model.businessSubCategory}}</label>
            <div>
                <button class="btn btn-primary btn-md" [hidden]="!isAuthor" translate [routerLink]="['/home/claim']"
                    [queryParams]="{id: claimId}">Edit</button>
                <h5>{{model.businessName}} - {{model.city}}</h5>
                <div>
                    <!-- {{model.commentsNum + " Reviews"}} -->
                </div>
                <!-- 
            <br>
            <label for="email">{{model.email}}</label>
            <br>
            <a [href]="formatURL(model.webPage)" target="_blank">{{model.webPage}}</a> -->
            </div>

            <br>
            <div class="divTable darkTable col-10">
                <div class="divTableHeading">
                    <div class="divTableHeadRow">
                        <div class="divTableHead">Amount Spend</div>
                        <div class="divTableHead">Discount</div>
                        <div class="divTableHead">Token Number</div>
                    </div>
                </div>
                <a class="divTableBody" *ngFor="let field of discountArray; let i = index">
                    <div class="divTableRow">
                        <div class="divTableCell">{{field.amount}}</div>
                        <div class="divTableCell">{{field.discount * 100}}%</div>
                        <div class="divTableCell">{{field.token}}</div>
                    </div>
                </a>
            </div>
            <div class="row mt-2">
                <ngu-carousel #myCarousels1 [inputs]="carouselBanner" (carouselLoad)="carouselTileOneLoad()" (onMove)="onMoveData($event)"
                    [reset]="rsts" (initData)="getCarouselData($event)">
                    <ngu-tile NguCarouselItem *ngFor="let image of albums; let i=index">
                        <img style="cursor: pointer;width: 100%;height: 100px;" [src]="image.thumb" (click)="open(i)"
                            class="img-thumbnail hoverable" />
                    </ngu-tile>
                    <a NguCarouselPrev class="carousel-control-prev">
                        <i class="fa fa-chevron-left fa-lg text-muted pt-5"></i>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a NguCarouselNext class="carousel-control-next text-faded">
                        <i class="fa fa-chevron-right fa-lg text-muted pt-5"></i>
                        <span class="sr-only">Next</span>
                    </a>
                </ngu-carousel>
            </div>
            <div>
                <div class="mt-5">
                    <h4 translate>Highlights</h4>
                    <hr align="left">
                    <div translate>{{model.productDescription}}</div>

                </div>
            </div>
            <!-- <div class="text-center">                
                <table class="table table-hover table-hover">
                    <thead>
                        <tr>
                            <th style="width:30%">Amount Spend</th>
                            <th style="width:30%">Discount</th>
                            <th style="width:30%">Token Number</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let field of discountArray; let i = index">
                            <td>
                                <label>{{field.amount}}</label>
                            </td>
                            <td>
                                <label>{{field.discount * 100}}%</label>
                            </td>
                            <td>
                                <label>{{field.token}}</label>
                            </td><br>
                            <div class="row col-12">
                                <button class="btn btn-success btn-sm" type="button">Buy</button>
                            </div>
                        </tr>
                    </tbody>
                </table>
            </div> -->

        </div>
        <div class="col-md-3 no-gutters">
            <div>
                <h4 translate>General Info</h4>
                <hr align="left">
                <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" [streetViewControl]="false">
                    <agm-marker *ngFor="let m of markers; let i = index" (markerClick)="clickedMarker(m.label, i)"
                        [latitude]="m.lat" [longitude]="m.lng" [label]="" [markerDraggable]="m.draggable" (dragEnd)="markerDragEnd(m, $event)">
                    </agm-marker>
                </agm-map>
                <ul>
                    <li>
                        <i class="fas fa-map-marker-alt"></i>
                        <span style="padding-left:10px">{{model.street}} {{model.city}},
                            {{model.state}} {{model.zip}}</span>
                    </li>
                    <li>
                        <i class="fas fa-phone"></i><span style="padding-left:10px">{{model.phone}}</span>
                    </li>
                    <li>
                        <i class="fas fa-envelope"></i><span style="padding-left:10px">{{model.email}}</span>
                    </li>
                    <li>
                        <i class="fas fa-globe"></i><span style="padding-left:10px"><a [href]=" formatURL(model.webPage) "
                                target="_blank ">{{model.webPage}}</a></span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="form-group col-md-9 no-gutters">
            <div *ngIf="!currentUser">
                <div class="row col-12">
                    <i class="far fa-thumbs-up fa-lg col-6">
                        <i style="font-size: medium;">{{likes}} likes</i>
                    </i>
                    <i class="far fa-thumbs-down fa-lg col-6">
                        <i style="font-size: medium;">{{dislikes}} dislikes</i>
                    </i>
                </div>
            </div>
            <div *ngIf="currentUser != undefined">
                <div class="row col-12">
                    <i (click)="thumbsUp()" [ngClass]="{ 'fa-thumbs-up-clicked': alreadyLiked }" class="far fa-thumbs-up fa-lg col-6"
                        placement="top" ngbTooltip="you liked it">
                        <i style="font-size: medium;">{{likes}} likes</i>
                        <br>
                        <label style="font-size: small" translate>(earn 5 tokens)</label>
                    </i>
                    <i (click)="thumbsDown()" [ngClass]="{ 'fa-thumbs-down-clicked': alreadyDisliked }" class="far fa-thumbs-down fa-lg col-6"
                        placement="top" ngbTooltip="you didn't like it">
                        <i style="font-size: medium;">{{dislikes}} dislikes</i>
                        <br>
                        <label style="font-size: small" translate>(to dislike costs 10 tokens)</label>
                    </i>
                </div>
            </div>
        </div>
        <div class="form-group col-md-9 no-gutters">
            <h4 translate>Fine Print</h4>
            <hr align="left">
            <div translate>{{model.finePrint}}</div>

        </div>
        <div class="form-group col-md-9 no-gutters">
            <h4 translate>About {{model.businessName}}</h4>
            <hr align="left">
            <div translate>{{model.service}}</div>

        </div>
        <div class="form-group col-md-9 no-gutters">
            <h4 translate>Reviews</h4>
            <hr align="left">
            <div class="form-group">
                <div>
                    <form #commentForm="ngForm" (ngSubmit)="onSubmit(commentText.value)">
                        <label for="commentTextarea" translate>Your comment (min 10 characters):</label>
                        <br>
                        <textarea class="form-control" [ngModel]="ownComment?.comment" name="comment" required
                            minlength="10" rows="3" id="commentTextarea" #commentText="ngModel"></textarea>
                        <br>
                        <div *ngIf="!ownComment">
                            <button class="btn btn-primary btn-sm" [disabled]="!commentForm.form.valid" translate>Submit</button>
                        </div>
                        <div *ngIf="ownComment">
                            <button class="btn btn-primary btn-sm" [disabled]="!commentForm.form.valid || commentText.pristine"
                                translate>Update</button>
                        </div>
                    </form>
                </div>
            </div>

            <ul>
                <li *ngFor="let c of commentsPage">
                    <div class="row col-12">
                        <div class="col-sm-11">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <i class="fa fa-user-circle fa-2x"></i> <span class="username">{{c.postedBy}}</span>
                                    <span class="text-muted float-right">posted on {{c.postedTime | date
                                        :'medium'}}</span>
                                </div>
                                <div class="panel-body">
                                    {{c.comment}}
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
            <ngb-pagination [collectionSize]="totalItems" [(page)]="page" [maxSize]="maxSize" [pageSize]="pageSize"
                [rotate]="true" (pageChange)="loadPage($event)"></ngb-pagination>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="buyModal" tabindex="-1" role="dialog" aria-labelledby="buyModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Confirmation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p translate>You will send iXin "" to . Your purchase will be shown on Your
                    iXin Pay Mobile App.
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Confirm</button>
            </div>
        </div>
    </div>
</div>